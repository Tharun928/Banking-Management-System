<div class="transactions-container">
  <div class="transactions-header">
    <h2>All Transaction History</h2>
    <div class="header-actions">
      <span class="user-role">Logged in as: {{ currentUserRole }}</span>
      <a routerLink="/" class="btn-back">Back to Dashboard</a>
    </div>
  </div>

  <div class="transactions-content">
    <div class="transactions-summary-cards">
      <div class="summary-card">
        <h3>Total Transactions</h3>
        <p class="summary-number">{{ transactions.length }}</p>
      </div>
      <div class="summary-card">
        <h3>Total Amount</h3>
        <p class="summary-number">${{ getTotalAmount() | number:'1.2-2' }}</p>
      </div>
      <div class="summary-card">
        <h3>Completed</h3>
        <p class="summary-number">{{ getCompletedTransactions() }}</p>
      </div>
    </div>

    <div *ngIf="loading" class="loading">
      <p>Loading all transactions...</p>
    </div>

    <div *ngIf="error" class="error-message">
      <p>{{ error }}</p>
      <button (click)="loadAllTransactions()" class="btn-retry">Retry</button>
    </div>

    <div *ngIf="!loading && !error" class="transactions-table">
      <div *ngIf="transactions.length === 0" class="no-transactions">
        <p>No transactions found.</p>
      </div>

      <div *ngIf="transactions.length > 0">
        <table>
          <thead>
            <tr>
              <th>Transaction ID</th>
              <th>Type</th>
              <th>From Account</th>
              <th>To Account</th>
              <th>Amount</th>
              <th>Description</th>
              <th>Status</th>
              <th>Date & Time</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let transaction of transactions">
              <td>{{ transaction.transactionId }}</td>
              <td>
                <span class="transaction-type" [class]="getTransactionTypeClass(transaction.transactionType)">
                  {{ transaction.transactionType }}
                </span>
              </td>
              <td>{{ transaction.fromAccountNumber }}</td>
              <td>{{ transaction.toAccountNumber }}</td>
              <td class="amount">${{ transaction.amount | number:'1.2-2' }}</td>
              <td>{{ transaction.description || '-' }}</td>
              <td>
                <span class="status-badge" [class]="getStatusClass(transaction.status)">
                  {{ transaction.status }}
                </span>
              </td>
              <td>{{ formatDate(transaction.timestamp) }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
